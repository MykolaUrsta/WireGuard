{% if user.is_authenticated %}
<header class="header">
    <div class="header-container">
        <!-- Logo -->
        <div class="header-logo">
            <a href="{% url 'accounts:vpn_overview' %}" class="logo-link">
                <i class="fas fa-shield-alt"></i>
                <span class="logo-text">WireGuard Panel</span>
            </a>
        </div>

        <!-- Navigation -->
        <nav class="header-nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="{% url 'accounts:vpn_overview' %}" class="nav-link {% if request.resolver_match.url_name == 'vpn_overview' %}active{% endif %}">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'locations:list' %}" class="nav-link {% if 'locations' in request.resolver_match.namespace %}active{% endif %}">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Locations</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'wireguard:networks' %}" class="nav-link {% if 'wireguard' in request.resolver_match.namespace %}active{% endif %}">
                        <i class="fas fa-network-wired"></i>
                        <span>Networks</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'wireguard:devices' %}" class="nav-link">
                            <i class="fas fa-laptop"></i>
                            <span>Devices</span>
                        </a>
                    </li>
                    {% if user.is_staff %}
                    <li class="nav-item">
                        <a href="/admin/" class="nav-link" target="_blank">
                            <i class="fas fa-cog"></i>
                            <span>Admin</span>
                        </a>
                    </li>
                    {% endif %}
                {% endif %}
            </ul>
        </nav>

        <!-- User Menu -->
        {% if user.is_authenticated %}
        <div class="header-user" x-data="{ open: false }">
            <button @click="open = !open" class="user-button">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <span class="user-name">{{ user.username }}</span>
                <i class="fas fa-chevron-down user-chevron" :class="{ 'rotated': open }"></i>
            </button>
            
            <div x-show="open" @click.away="open = false" x-transition class="user-dropdown">
                <div class="dropdown-header">
                    <div class="user-info">
                        <strong>{{ user.get_full_name|default:user.username }}</strong>
                        <small>{{ user.email }}</small>
                    </div>
                </div>
                <div class="dropdown-divider"></div>
                <a href="{% url 'accounts:vpn_overview' %}" class="dropdown-item">
                    <i class="fas fa-user-edit"></i>
                    <span>Profile</span>
                </a>
                <a href="{% url 'accounts:setup_2fa' %}" class="dropdown-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Security</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="{% url 'accounts:logout' %}" class="dropdown-item text-danger">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>
    </div>
</header>
{% endif %}
